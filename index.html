<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="UP" name="UP">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Clock</title>
    <meta name="robots" content="noindex">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
    <style id="INLINE_PEN_STYLESHEET_ID">
        @import url("https://fonts.googleapis.com/css?family=Roboto+Condensed:300");

        @keyframes anti-burn-in {
            0% {
                transform: translate(0, -5px);
            }
            25% {
                transform: translate(-5px, 0);
            }
            50% {
                transform: translate(0, 5px);
            }
            75% {
                transform: translate(5px, 0);
            }
            100% {
                transform: translate(0, -5px);
            }
        }

        body {
            text-align: center;
            background-color: #000;
            color: #EEE;
            font-family: "Roboto Condensed", sans-serif;
            font-weight: 300;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }

        #playlist {
            min-width: 100vw;
            min-height: 100vh;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: -2;
            opacity: 0.95;
        }

        .bg-video {
            min-width: 100vw;
            min-height: 100vh;
        }

        .vignette {
            position: fixed;
            top: 0;
            left: 0;
            min-width: 100vw;
            min-height: 100vh;
            box-shadow: 0 0 calc(100vw / 5) calc(100vw / 10) rgba(0, 0, 0, 0.75) inset;
            z-index: 99;
        }

        .clock {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            animation: anti-burn-in forwards 30s infinite linear;
            position: relative;
        }

        .column {
            display: inline-block;
            vertical-align: top;
            font-size: calc(100vw / 8);
            line-height: calc(100vw / 8);
        }

        .colon {
            font-size: calc(100vw / 8);
            line-height: calc(100vw / 8);
            margin: 0 calc(100vw / 200);
            display: inline-flex;
            height: 100%;
            flex-flow: row nowrap;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            padding-bottom: calc(100vw / (8 * 8));
            text-shadow: 3px 3px 0 #000000;
            transition: .1s ease-in-out;
        }

        .hidden {
            display: none;
            visibility: hidden;
        }

        .column {
            transition: transform 300ms;
        }

        .num {
            transition: opacity 500ms, text-shadow 100ms;
            opacity: 0.025;
        }

        .num.visible {
            opacity: 1;
            text-shadow: 3px 3px 0 #000000;
        }

        .num.close {
            opacity: 0.35;
        }

        .num.far {
            opacity: 0.1;
        }

        .num.distant {
            opacity: 0.05;
        }
    </style>
</head>

<body>
<div id="playlist">
    <video class="bg-video" autoplay loop muted>
        <source src="videos/loop-1.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
<div class="vignette"></div>
<div class="clock">
    <div class="column">
        <div class="num">0</div>
        <div class="num">1</div>
        <div class="num">2</div>
    </div>
    <div class="column">
        <div class="num">0</div>
        <div class="num">1</div>
        <div class="num">2</div>
        <div class="num">3</div>
        <div class="num">4</div>
        <div class="num">5</div>
        <div class="num">6</div>
        <div class="num">7</div>
        <div class="num">8</div>
        <div class="num">9</div>
    </div>
    <div class="colon">
        <div>:</div>
    </div>
    <div class="column">
        <div class="num">0</div>
        <div class="num">1</div>
        <div class="num">2</div>
        <div class="num">3</div>
        <div class="num">4</div>
        <div class="num">5</div>
    </div>
    <div class="column">
        <div class="num">0</div>
        <div class="num">1</div>
        <div class="num">2</div>
        <div class="num">3</div>
        <div class="num">4</div>
        <div class="num">5</div>
        <div class="num">6</div>
        <div class="num">7</div>
        <div class="num">8</div>
        <div class="num">9</div>
    </div>
    <div class="colon hidden"></div>
    <div class="column hidden">
        <div class="num">0</div>
        <div class="num">1</div>
        <div class="num">2</div>
        <div class="num">3</div>
        <div class="num">4</div>
        <div class="num">5</div>
    </div>
    <div class="column hidden">
        <div class="num">0</div>
        <div class="num">1</div>
        <div class="num">2</div>
        <div class="num">3</div>
        <div class="num">4</div>
        <div class="num">5</div>
        <div class="num">6</div>
        <div class="num">7</div>
        <div class="num">8</div>
        <div class="num">9</div>
    </div>
    <!--    <div class="colon hidden"></div>-->
    <!--    <div class="column hidden">-->
    <!--        <div class="num">0</div>-->
    <!--        <div class="num">1</div>-->
    <!--        <div class="num">2</div>-->
    <!--        <div class="num">3</div>-->
    <!--        <div class="num">4</div>-->
    <!--        <div class="num">5</div>-->
    <!--    </div>-->
    <!--    <div class="column hidden">-->
    <!--        <div class="num">0</div>-->
    <!--        <div class="num">1</div>-->
    <!--        <div class="num">2</div>-->
    <!--        <div class="num">3</div>-->
    <!--        <div class="num">4</div>-->
    <!--        <div class="num">5</div>-->
    <!--        <div class="num">6</div>-->
    <!--        <div class="num">7</div>-->
    <!--        <div class="num">8</div>-->
    <!--        <div class="num">9</div>-->
    <!--    </div>-->
</div>

<script>
    let size = window.innerWidth / 8;
    let columns = Array.from(document.getElementsByClassName('column'));
    let colons = Array.from(document.getElementsByClassName('colon'));
    let d, c;
    let classList = ['visible', 'close', 'far', 'far', 'distant', 'distant'];
    let use24HourClock = true;

    window.onresize = function () {
        size = window.innerWidth / 8;
    }

    window.HELLO = true;
    let video_id = 1;
    const playlist = document.getElementById("playlist");
    setInterval(() => {
        video_id = video_id++ % 39 + 1;
        if (window.HELLO) playlist.innerHTML = `<video class="bg-video" autoplay loop muted><source src="videos/loop-${video_id}.mp4" type="video/mp4">Your browser does not support the video tag.</video>`;
    }, 10000);

    function padClock(p, n) {
        return p + ('0' + n).slice(-2);
    }

    function getClock() {
        d = new Date();
        return [
            use24HourClock ? d.getHours() : d.getHours() % 12 || 12,
            d.getMinutes(),
            d.getSeconds()].reduce(padClock, '');
    }

    function getClass(n, i2) {
        return classList.find((class_, classIndex) => Math.abs(n - i2) === classIndex) || '';
    }

    let loop = setInterval(() => {
        c = getClock();

        if (c % 2) {
            colons.forEach((ele) => {
                ele.style.opacity = "0.75";
            })
        } else {
            colons.forEach((ele) => {
                ele.style.opacity = "1";
            })
        }

        columns.forEach((ele, i) => {
            let n = +c[i];
            let offset = -n * size;
            ele.style.transform = `translateY(calc(50vh + ${offset}px - ${size / 2}px))`;
            Array.from(ele.children).forEach((ele2, i2) => {
                ele2.className = 'num ' + getClass(n, i2);
            });
        });
    }, 200 + Math.E * 10);
</script>
</body>

</html>
